<main class="container mx-auto px-4 py-8 mt-16 grow">
  <property-form (added)="addProperty($event)"></property-form>

  <section class="mb-6 bg-white p-6 rounded-lg shadow-md">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div>
        <label for="search" class="block text-gray-700 font-bold mb-2">Search</label>
        <input
          type="text"
          id="search"
          placeholder="Filter by title or address..."
          [ngModel]="search()"
          (ngModelChange)="search.set($event)"
          class="w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
        />
      </div>

      <div>
        <label for="filterProvince" class="block text-gray-700 font-bold mb-2"
          >Filter by Province</label
        >
        <select
          id="filterProvince"
          [ngModel]="province()"
          (ngModelChange)="province.set($event)"
          class="w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white"
        >
          <option value="">All Provinces</option>
          <option value="Madrid">Madrid</option>
          <option value="Barcelona">Barcelona</option>
          <option value="Valencia">Valencia</option>
        </select>
      </div>
    </div>
  </section>

  <section>
    <h2 class="text-2xl font-bold text-gray-800">Properties for Sale</h2>
    <div class="text-gray-600 text-sm p-2 mb-4">
      Showing {{ filteredProperties().length }} properties
      @if (search() || province()) {
        (Filtered by: {{ search() }} {{ province() ? '- ' + province() : '' }})
      }
    </div>

    <div id="property-listings" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      @for (property of filteredProperties(); track property.id) {
        <property-card [property]="property" (deleted)="deleteProperty(property.id!)">
        </property-card>
      } @empty {
        <p class="text-2xl text-gray-500 col-span-full text-center py-8">
          No properties found matching your criteria.
        </p>
      }
    </div>
  </section>
</main>
